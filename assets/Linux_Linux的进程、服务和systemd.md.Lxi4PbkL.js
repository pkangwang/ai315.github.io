import{_ as s,c as e,o as t,a2 as a}from"./chunks/framework.84TDCN6B.js";const m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"Linux/Linux的进程、服务和systemd.md","filePath":"Linux/Linux的进程、服务和systemd.md"}'),i={name:"Linux/Linux的进程、服务和systemd.md"},p=a('<h2 id="进程和服务的区别" tabindex="-1">进程和服务的区别 <a class="header-anchor" href="#进程和服务的区别" aria-label="Permalink to &quot;进程和服务的区别&quot;">​</a></h2><p>进程是程序正在运行的实例，是运行着的程序，每个进程都占用系统资源，包括内存、I/O 等。每个进程必须有唯一的进程ID，且在操作系统的进程管理器中也有对应的进程控制块（PCB）实体。</p><p>服务是在操作系统上运行的一种保持长期存在的非交互性进程，它主要负责提供特定的系统或网络服务，以便满足来自客户端的请求或负责某个定时任务的执行，使操作系统保持运行。</p><p>可以简单的理解为，进程一般是是暂时的、一次性的、前台执行的、用户直接交互的；而服务一般是持续性的、后台执行的、非交互性的。</p><h2 id="初始化系统的分类" tabindex="-1">初始化系统的分类 <a class="header-anchor" href="#初始化系统的分类" aria-label="Permalink to &quot;初始化系统的分类&quot;">​</a></h2><p>Linux所提供的持续性服务由守护进程实现，Linux将管理每一个守护进程的方法作为一个服务，并且使用了某一种初始化系统，也叫init系统，主流的init系统分为两种：</p><ul><li>Sysinit 源于20世纪80年代创建的传统init系统，目前，大多数老版本UNIX和Linux采用此init系统。</li><li>systemd 大多数Linux发行版的最新版本都采用了systemd作为 init系统，例如centos7.x及以后，Ubuntu15及以后。</li></ul><p>所以，应该将重点放在systemd上。</p><h2 id="systemd基本知识" tabindex="-1">systemd基本知识 <a class="header-anchor" href="#systemd基本知识" aria-label="Permalink to &quot;systemd基本知识&quot;">​</a></h2><p><strong>单元、服务单元、目标单元</strong></p><p>systemd的主要任务是启动停止服务。Linux将管理的事项抽象成一个个单元（Units）。单元是一个由名称、类型和配置文件组成的组，专注于某一项服务。</p><p>在处理服务时，systemd分为服务单元和目标单元。</p><p>每个服务单元以.service结尾，每个目标单元以.target结尾。</p><p>列出所有的单元：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl list-units</span></span></code></pre></div><p>列出所有的服务单元：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl list-units | grep  .service</span></span></code></pre></div><p>列出所有的目标单元：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl list-units | grep  .starget</span></span></code></pre></div><p><strong>单元的配置文件</strong></p><p>每个单元对应若干配置文件。Linux单元配置文件位于/lib/systemd/system和/etc/systemd/system中。</p><p>列出所有的服务单元配置文件：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl list-units-files --type=service</span></span></code></pre></div><p>列出所有的目标单元配置文件：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl list-units-files --type=target</span></span></code></pre></div><p>显示sshd服务的单元配置文件：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>cat /lib/systemd/system/sshd.service</span></span></code></pre></div><p>服务单元的配置文件主要包括：</p><ul><li>Description 描述</li><li>Documention 手册页</li><li>After 应该在哪些服务启动之后启动本服务</li><li>EnvironmentFile 服务配置文件</li><li>ExecStart 启动服务的命令</li><li>ExecReload 重载服务的命令</li><li>WantedBy 服务所属的目标单元</li></ul><h2 id="启停服务" tabindex="-1">启停服务 <a class="header-anchor" href="#启停服务" aria-label="Permalink to &quot;启停服务&quot;">​</a></h2><p>启动服务：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl start sshd.service</span></span></code></pre></div><p>停止服务：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl stop sshd.service</span></span></code></pre></div><p>重启服务：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl restart sshd.service</span></span></code></pre></div><p>查看服务状态：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>systemctl status sshd.service</span></span></code></pre></div>',38),n=[p];function l(c,d,o,h,r,u){return t(),e("div",null,n)}const v=s(i,[["render",l]]);export{m as __pageData,v as default};
